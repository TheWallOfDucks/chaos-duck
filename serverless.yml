service: chaos-duck

package:
  individually: false

provider:
  name: aws
  runtime: nodejs8.10
  memorySize: 1024
  stage: dev
  iamManagedPolicies:
    - 'arn:aws:iam::aws:policy/service-role/AWSLambdaRole'
    - 'arn:aws:iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole'
    - 'arn:aws:iam::aws:policy/AmazonECS_FullAccess'
    - 'arn:aws:iam::aws:policy/AmazonElastiCacheFullAccess'
    - 'arn:aws:iam::aws:policy/AmazonSSMReadOnlyAccess'
  region: us-east-1
  versionFunctions: false
  environment:
    SLACK_WEBHOOK_URL: ${env:SLACK_WEBHOOK_URL}

functions:
  chaos:
    handler: lib/lambda/index.handler
    events:
      - http:
          path: chaos
          method: post
      
plugins:
    - serverless-offline
    - serverless-dotenv-plugin    